import{u as Pe,r as c,j as e,w as Te,c as De,l as Se,y as Ie,X as me,U as Ee,A as g,z as h}from"./index-B5-U9oIS.js";import{U as Me,P as Le}from"./user-check-DyUoXHuy.js";import{K as $e,S as Ue,T as xe}from"./trash-2-Dx1iDlWT.js";import{S as Re}from"./search-DVKPN_YA.js";import{P as qe}from"./plus-0vm9Kazn.js";const ue=["Mike","Jordan"],ze=()=>{var ie,de,ce;const{user:a}=Pe(),[_,ge]=c.useState("personal-training"),[w,q]=c.useState([]),[M,Q]=c.useState([]),[T,he]=c.useState(null),[d,D]=c.useState(null),[J,S]=c.useState(!1),[C,Y]=c.useState(!1),[pe,G]=c.useState(!1),[m,K]=c.useState({code:"",selectedUserId:""}),[N,V]=c.useState("individual"),[v,B]=c.useState([]),[F,te]=c.useState(""),[X,H]=c.useState("dropdown"),[A,W]=c.useState(""),[f,L]=c.useState("all"),[y,I]=c.useState(1),Z=10,[O,k]=c.useState([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:""}]),be=[{id:"personal-training",name:"Personal Training Πρόγραμμα",icon:De},{id:"payments",name:"Αιτήματα Πληρωμών",icon:Se},{id:"analytics",name:"Αναλυτικά Κρατήσεων",icon:Ie},{id:"users",name:"Διαχείριση Χρηστών",icon:Me}],fe=["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],$=s=>{var l;if(!((l=s.scheduleData)!=null&&l.sessions)||s.scheduleData.sessions.length===0)return"Personal Training";const t=s.scheduleData.sessions.map(n=>n.type),r=[...new Set(t)];if(r.length===1)switch(r[0]){case"personal":return"Personal Training";case"kickboxing":return"Kick Boxing";case"combo":return"Combo Training";default:return"Personal Training"}else if(r.length>1)return"Combo Training";return"Personal Training"},re=s=>{const t=["user1@freegym.gr","user2@freegym.gr"],r=["PERSONAL2024","KICKBOX2024"],l=!!s.email&&t.includes(s.email),n=!!s.personalTrainingCode&&r.includes(s.personalTrainingCode);return l||n},le=w.filter(s=>{if(!F)return!0;const t=F.toLowerCase();return s.firstName.toLowerCase().includes(t)||s.lastName.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||`${s.firstName} ${s.lastName}`.toLowerCase().includes(t)}),U=M.filter(s=>{const t=!A||(()=>{const l=A.toLowerCase();return s.user.firstName.toLowerCase().includes(l)||s.user.lastName.toLowerCase().includes(l)||s.user.email.toLowerCase().includes(l)||`${s.user.firstName} ${s.user.lastName}`.toLowerCase().includes(l)})(),r=f==="all"||s.status===f;return t&&r}),u=Math.ceil(U.length/Z),ee=(y-1)*Z,ae=ee+Z,ne=U.slice(ee,ae);c.useEffect(()=>{I(1)},[A,f]);const oe=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"],ye=async()=>{try{console.log("[AdminPanel] Checking admin role in database...");const{data:s,error:t}=await g.from("user_profiles").select("user_id, role, first_name, last_name, email").eq("user_id",a==null?void 0:a.id).single();return t?(console.error("[AdminPanel] Error checking admin profile:",t),!1):(console.log("[AdminPanel] Admin profile in database:",s),console.log("[AdminPanel] Admin role in database:",s==null?void 0:s.role),(s==null?void 0:s.role)==="admin")}catch(s){return console.error("[AdminPanel] Exception checking admin role:",s),!1}},je=async()=>{try{console.log("[AdminPanel] Testing if we can create data...");const s={user_id:a==null?void 0:a.id,month:1,year:2e3,schedule_data:{sessions:[]},status:"pending",created_by:a==null?void 0:a.id},{data:t,error:r}=await g.from("personal_training_schedules").insert(s).select();return r?(console.log("[AdminPanel] Cannot create data - RLS blocking:",r.message),!1):t&&t.length>0?(await g.from("personal_training_schedules").delete().eq("id",t[0].id),console.log("[AdminPanel] Can create data - RLS working correctly"),!0):!1}catch(s){return console.error("[AdminPanel] Exception testing data creation:",s),!1}},Ne=async(s,t)=>{if(!t){console.log("[AdminPanel] No admin ID available for test data creation");return}try{console.log("[AdminPanel] Creating test schedule for user:",s.email);const r={user_id:s.id,month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:[{id:"test-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:"Test session created by admin"}],notes:"Test program created by admin",specialInstructions:"This is test data"},status:"pending",created_by:t},{data:l,error:n}=await g.from("personal_training_schedules").insert(r).select();n?console.error("[AdminPanel] Error creating test schedule:",n):(console.log("[AdminPanel] Test schedule created successfully:",l),setTimeout(()=>{z()},1e3))}catch(r){console.error("[AdminPanel] Exception creating test schedule:",r)}},z=async()=>{console.log("[AdminPanel] ===== DATA LOADING STARTED ====="),console.log("[AdminPanel] Current user:",a==null?void 0:a.email,"Role:",a==null?void 0:a.role);try{S(!0),console.log("[AdminPanel] Querying user_profiles table...");const{data:s,error:t}=await g.from("user_profiles").select("*").order("created_at",{ascending:!1});if(console.log("[AdminPanel] User profiles query result - rows:",s==null?void 0:s.length,"error:",t),t)throw console.error("[AdminPanel] User profiles error:",t),t;console.log("[AdminPanel] Querying personal_training_schedules table..."),console.log("[AdminPanel] Current auth user ID:",a==null?void 0:a.id),console.log("[AdminPanel] Current auth user role:",a==null?void 0:a.role),console.log("[AdminPanel] Attempting to query personal_training_schedules...");let r=[],l=null;const{data:n,error:i}=await g.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at").order("created_at",{ascending:!1});if(i){console.log("[AdminPanel] Direct query failed:",i);const{data:o,error:x}=await g.from("personal_training_schedules").select("id, user_id, status").limit(10);if(x){console.log("[AdminPanel] Limited query also failed:",x);const{count:b,error:se}=await g.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Count query result:",b,"error:",se)}else console.log("[AdminPanel] Limited query succeeded:",o),r=o||[]}else console.log("[AdminPanel] Direct query succeeded:",n),r=n||[];if(l=i,console.log("[AdminPanel] Schedules query result - rows:",r==null?void 0:r.length,"error:",l),(r==null?void 0:r.length)===0&&!l){console.log("[AdminPanel] Query succeeded but returned 0 rows - checking RLS policies...");const o=await ye();console.log("[AdminPanel] Is admin in database:",o);const{count:x,error:b}=await g.from("personal_training_schedules").select("*",{count:"exact",head:!0});console.log("[AdminPanel] Total rows in table (bypassing RLS):",x,"error:",b),x&&x>0&&(console.warn("[AdminPanel] RLS is blocking access to existing data! Table has",x,"rows but query returns 0."),console.warn("[AdminPanel] Admin role might not be properly configured in RLS policies."),console.warn("[AdminPanel] Please run the SQL script: database/fix_admin_rls_policies.sql"))}if(l){console.error("[AdminPanel] Schedules query failed with error:",l),console.log("[AdminPanel] Error code:",l.code),console.log("[AdminPanel] Error message:",l.message),console.log("[AdminPanel] Error details:",l.details),console.log("[AdminPanel] Error hint:",l.hint),console.log("[AdminPanel] Attempting to check table existence...");const{data:o,error:x}=await g.from("personal_training_schedules").select("count").limit(1);console.log("[AdminPanel] Table check result:",o,"error:",x)}if(l&&(console.error("[AdminPanel] Schedules error:",l),console.log("[AdminPanel] RLS might be blocking access. Checking if we can insert test data..."),console.log("[AdminPanel] Continuing with empty schedules due to RLS restrictions")),!s||s.length===0){console.log("[AdminPanel] No users found in database - setting empty states"),q([]),Q([]);return}console.log("[AdminPanel] Transforming user profiles...");const j=s.map(o=>({id:o.user_id,email:o.email||`user-${o.user_id.slice(0,8)}@example.com`,firstName:o.first_name||"",lastName:o.last_name||"",profile_photo:o.profile_photo||"",profile_photo_locked:o.profile_photo_locked||!1,dob:o.dob||"",address:o.address||"",emergency_contact:o.emergency_contact||"",dob_locked:o.dob_locked||!1,hasPersonalTrainingCode:!1,personalTrainingCode:void 0,packageType:void 0}));console.log("[AdminPanel] Transformed users count:",j.length),q(j),console.log("[AdminPanel] Creating program statuses from schedules..."),console.log("[AdminPanel] Schedules data:",r);const p=(r||[]).map(o=>{console.log("[AdminPanel] Processing schedule:",o.id,"for user:",o.user_id);const x=j.find(se=>se.id===o.user_id);if(!x)return console.warn(`[AdminPanel] User not found for schedule ${o.id}, user_id: ${o.user_id}`),null;const b={user:x,schedule:{id:o.id,userId:o.user_id,month:o.month,year:o.year,status:o.status,scheduleData:o.schedule_data,createdBy:o.created_by,createdAt:o.created_at,updatedAt:o.updated_at,acceptedAt:o.accepted_at,declinedAt:o.declined_at},status:o.status};return console.log("[AdminPanel] Created program status:",b),b}).filter(o=>o!==null);console.log("[AdminPanel] Final program statuses count:",p.length),p.length===0&&j.length>0&&(console.log("[AdminPanel] No schedules found. Creating test data to verify system..."),await je()?await Ne(j[0],a==null?void 0:a.id):(console.warn("[AdminPanel] Cannot create test data due to RLS restrictions."),console.warn("[AdminPanel] Please fix RLS policies by running: database/fix_admin_rls_policies.sql"))),Q(p),console.log("[AdminPanel] Checking personal training codes...");const{data:P,error:E}=await g.from("personal_training_codes").select("*").limit(5);console.log("[AdminPanel] Personal training codes check - rows:",P==null?void 0:P.length,"error:",E),await we(j),console.log("[AdminPanel] ===== DATA LOADING COMPLETED SUCCESSFULLY =====")}catch(s){console.error("[AdminPanel] ===== DATA LOADING FAILED ====="),console.error("[AdminPanel] Error details:",s);const t=s instanceof Error?s.message:"Unknown error";h.error(`Σφάλμα κατά τη φόρτωση των χρηστών: ${t}`),q([]),Q([])}finally{S(!1)}},we=async s=>{try{const{data:t,error:r}=await g.from("personal_training_codes").select("user_id, code, package_type, sessions_remaining").eq("is_active",!0);if(r){console.error("Error fetching personal training codes:",r),q(s);return}const l=s.map(n=>{const i=t==null?void 0:t.find(j=>j.user_id===n.id);return i?{...n,hasPersonalTrainingCode:!0,personalTrainingCode:i.code,packageType:i.package_type}:n});q(l)}catch(t){console.error("Error checking personal training codes:",t)}};c.useEffect(()=>{console.log("[AdminPanel] useEffect triggered - user:",a==null?void 0:a.email,"role:",a==null?void 0:a.role,"activeTab:",_),a&&a.role==="admin"&&_==="personal-training"?(console.log("[AdminPanel] User changed - loading data for admin user:",a.email),z()):a&&a.role!=="admin"?console.warn("[AdminPanel] User is not admin! Role:",a.role,"Email:",a.email):a||console.log("[AdminPanel] No user logged in")},[a,_]),c.useEffect(()=>{_==="personal-training"&&(console.log("[AdminPanel] useEffect triggered - loading data for personal-training tab"),z())},[_]);const ve=async s=>{try{S(!0);const{data:t,error:r}=await g.from("personal_training_schedules").select("id, user_id, month, year, schedule_data, status, created_by, created_at, updated_at, accepted_at, declined_at").eq("user_id",s).order("created_at",{ascending:!1}).limit(1);if(r){console.error("[ADMIN] Error loading schedule for user",s,r),h.error("Σφάλμα κατά τη φόρτωση του προγράμματος"),D(null);return}if(!t||t.length===0){D(null),h.error("Δεν βρέθηκε πρόγραμμα για τον συγκεκριμένο χρήστη");return}const l=t[0],n={id:l.id,userId:l.user_id,month:l.month,year:l.year,scheduleData:l.schedule_data,status:l.status,createdBy:l.created_by,createdAt:l.created_at,updatedAt:l.updated_at,acceptedAt:l.accepted_at,declinedAt:l.declined_at};D(n)}catch(t){console.error("[ADMIN] Exception while loading schedule",t),h.error("Σφάλμα κατά τη φόρτωση του προγράμματος"),D(null)}finally{S(!1)}},ke=()=>{if(!d)return;const s={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:""},t={...d,scheduleData:{...d.scheduleData,sessions:[...d.scheduleData.sessions,s]}};D(t)},R=(s,t,r)=>{if(!d)return;const l=d.scheduleData.sessions.map(i=>i.id===s?{...i,[t]:r}:i),n={...d,scheduleData:{...d.scheduleData,sessions:l}};D(n)},Ae=s=>{if(!d)return;const t=d.scheduleData.sessions.filter(l=>l.id!==s),r={...d,scheduleData:{...d.scheduleData,sessions:t}};D(r)},_e=async()=>{if(!(!d||!T))try{S(!0),h.success(`Το πρόγραμμα για τον ${T.firstName} ${T.lastName} αποθηκεύτηκε!`),Y(!1)}catch{h.error("Σφάλμα κατά την αποθήκευση του προγράμματος")}finally{S(!1)}},Ce=async()=>{var t,r;const s=N==="individual"?[m.selectedUserId]:v;if(!m.code.trim()){h.error("Παρακαλώ εισάγετε κωδικό");return}if(s.length===0){h.error("Παρακαλώ επιλέξτε χρήστη/ες");return}try{S(!0),console.log("[ADMIN] Starting to create personal training code...");const{data:l,error:n}=await g.from("personal_training_codes").select("id, code").eq("code",m.code.trim()).limit(1);if(n)throw console.error("[ADMIN] Error checking existing code:",n),n;if(l&&l.length>0){h.error(`Ο κωδικός "${m.code.trim()}" υπάρχει ήδη. Παρακαλώ επιλέξτε διαφορετικό κωδικό.`);return}for(const j of s){const p=w.find(E=>E.id===j);if(!p){h.error(`Δεν βρέθηκε ο χρήστης με ID: ${j}`);continue}console.log("[ADMIN] Selected user:",p.firstName,p.lastName,"ID:",p.id),console.log("[ADMIN] Admin user ID:",a==null?void 0:a.id),console.log("[ADMIN] Code to create:",m.code.trim()),console.log("[ADMIN] Inserting code into personal_training_codes...");const{error:P}=await g.from("personal_training_codes").insert({code:m.code.trim(),package_type:"personal_training",created_by:a==null?void 0:a.id,is_active:!0,user_id:p.id,sessions_remaining:10});if(P)throw console.error("[ADMIN] Code insertion error:",P),P;if(console.log("[ADMIN] Code inserted successfully for user:",p.email),j===s[0]){const E=O.map(b=>({id:b.id,date:b.date,startTime:b.startTime,endTime:b.endTime,type:b.type,trainer:b.trainer||"Mike",room:b.room,notes:b.notes})),o={user_id:p.id,trainer_name:((t=E[0])==null?void 0:t.trainer)||"Mike",month:new Date().getMonth()+1,year:new Date().getFullYear(),schedule_data:{sessions:E,notes:"",trainer:((r=E[0])==null?void 0:r.trainer)||"Mike",specialInstructions:""},status:"pending",created_by:a==null?void 0:a.id};console.log("[ADMIN] Schedule payload:",o),console.log("[ADMIN] Inserting schedule into personal_training_schedules...");const{error:x}=await g.from("personal_training_schedules").insert(o);if(x)throw console.error("[ADMIN] Schedule insertion error:",x),x;console.log("[ADMIN] Schedule inserted successfully")}}const i=s.map(j=>{const p=w.find(P=>P.id===j);return p?`${p.firstName} ${p.lastName}`:"Άγνωστος"}).join(", ");h.success(`Ο κωδικός ${m.code} δημιουργήθηκε επιτυχώς για ${N==="individual"?"τον χρήστη":"τους χρήστες"}: ${i}!`),G(!1),K({code:"",selectedUserId:""}),V("individual"),B([]),te(""),H("dropdown"),k([{id:"tmp-1",date:new Date().toISOString().split("T")[0],startTime:"18:00",endTime:"19:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:""}]),z()}catch(l){if(console.error("[ADMIN] Error creating personal training code:",l),l&&typeof l=="object"&&"code"in l){const n=l;n.code==="23505"?h.error("Ο κωδικός υπάρχει ήδη. Παρακαλώ επιλέξτε διαφορετικό κωδικό."):n.code==="23503"?h.error("Πρόβλημα με τα δεδομένα χρήστη. Ελέγξτε ότι ο χρήστης υπάρχει."):n.code==="PGRST301"?h.error("Πρόβλημα αυθεντικοποίησης. Κάντε επανασύνδεση."):h.error(`Σφάλμα βάσης δεδομένων: ${n.message||"Άγνωστο σφάλμα"}`)}else h.error("Σφάλμα κατά τη δημιουργία του κωδικού")}finally{S(!1)}};return!a||a.role!=="admin"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Δεν έχετε δικαίωμα πρόσβασης"}),e.jsx("p",{className:"text-gray-600",children:"Μόνο οι διαχειριστές μπορούν να έχουν πρόσβαση σε αυτή τη σελίδα."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl shadow-xl p-4 sm:p-8 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-3xl font-bold mb-2",children:"🏋️‍♂️ Διαχείριση Γυμναστηρίου"}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["Καλώς ήρθες, ",e.jsx("span",{className:"font-semibold",children:a.firstName}),"!"]})]}),e.jsx("div",{className:"bg-white/20 rounded-xl p-3 sm:p-4 backdrop-blur-sm self-start sm:self-auto",children:e.jsx(Te,{className:"h-8 w-8 sm:h-12 sm:w-12"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex overflow-x-auto space-x-2 sm:space-x-8 px-3 sm:px-6",children:be.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>ge(s.id),className:`py-3 sm:py-4 px-2 sm:px-1 border-b-3 font-semibold text-xs sm:text-sm flex items-center space-x-2 sm:space-x-3 transition-all duration-200 whitespace-nowrap ${_===s.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(t,{className:`h-4 w-4 sm:h-5 sm:w-5 ${_===s.id?"text-blue-500":"text-gray-400"}`}),e.jsx("span",{className:"hidden sm:inline",children:s.name}),e.jsx("span",{className:"sm:hidden",children:s.name.split(" ")[0]})]},s.id)})})}),e.jsxs("div",{className:"p-3 sm:p-6",children:[J&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Φόρτωση..."})]}),_==="personal-training"&&!J&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-4 sm:p-6 text-white mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-2",children:"💪 Personal Training Πρόγραμμα"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Διαχείριση προγραμμάτων προπόνησης"})]}),e.jsxs("button",{onClick:()=>G(!0),className:"flex items-center space-x-2 sm:space-x-3 px-4 sm:px-6 py-2 sm:py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-semibold shadow-lg text-sm sm:text-base",children:[e.jsx($e,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{children:"🔑 Δημιουργία Κωδικού"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-lg border border-blue-200 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-800 mb-2 sm:mb-3",children:"🔍 Αναζήτηση Χρήστη"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(Re,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500"})}),e.jsx("input",{type:"text",placeholder:"Αναζητήστε με όνομα ή email...",value:A,onChange:s=>W(s.target.value),className:"w-full pl-10 sm:pl-12 pr-4 py-2 sm:py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400 text-sm sm:text-base"})]})]}),A&&e.jsxs("button",{onClick:()=>W(""),className:"px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm text-blue-600 hover:text-red-600 flex items-center space-x-2 bg-white rounded-lg border border-blue-200 hover:border-red-200 transition-all duration-200",children:[e.jsx(me,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Καθαρισμός"})]})]}),A&&e.jsxs("div",{className:"mt-4 bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:["📊 Εμφανίζονται ",U.length," από ",M.length," προγράμματα"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-6",children:[e.jsx("div",{className:`bg-gradient-to-br from-blue-50 to-indigo-100 border-2 rounded-lg sm:rounded-xl p-2 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${f==="all"?"border-blue-500 ring-2 sm:ring-4 ring-blue-200":"border-blue-300 hover:border-blue-400"}`,onClick:()=>L("all"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between h-full",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"p-2 sm:p-4 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg sm:rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-lg sm:text-2xl",children:"📊"})}),e.jsxs("div",{className:"ml-2 sm:ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-blue-800 uppercase tracking-wide truncate",children:"Όλα"}),e.jsx("p",{className:"text-lg sm:text-3xl font-bold text-blue-900",children:M.length})]})]}),e.jsx("div",{className:"text-blue-600 text-lg sm:text-3xl mt-1 sm:mt-0 flex-shrink-0",children:"📈"})]})}),e.jsx("div",{className:`bg-gradient-to-br from-yellow-50 to-orange-100 border-2 rounded-lg sm:rounded-xl p-2 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${f==="pending"?"border-yellow-500 ring-2 sm:ring-4 ring-yellow-200":"border-yellow-300 hover:border-yellow-400"}`,onClick:()=>L("pending"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between h-full",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"p-2 sm:p-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg sm:rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-lg sm:text-2xl",children:"⏳"})}),e.jsxs("div",{className:"ml-2 sm:ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-yellow-800 uppercase tracking-wide truncate",children:"Σε Αναμονή"}),e.jsx("p",{className:"text-lg sm:text-3xl font-bold text-yellow-900",children:M.filter(s=>s.status==="pending").length})]})]}),e.jsx("div",{className:"text-yellow-600 text-lg sm:text-3xl mt-1 sm:mt-0 flex-shrink-0",children:"⏰"})]})}),e.jsx("div",{className:`bg-gradient-to-br from-green-50 to-emerald-100 border-2 rounded-lg sm:rounded-xl p-2 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${f==="accepted"?"border-green-500 ring-2 sm:ring-4 ring-green-200":"border-green-300 hover:border-green-400"}`,onClick:()=>L("accepted"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between h-full",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"p-2 sm:p-4 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg sm:rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-lg sm:text-2xl",children:"✅"})}),e.jsxs("div",{className:"ml-2 sm:ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-green-800 uppercase tracking-wide truncate",children:"Αποδεκτά"}),e.jsx("p",{className:"text-lg sm:text-3xl font-bold text-green-900",children:M.filter(s=>s.status==="accepted").length})]})]}),e.jsx("div",{className:"text-green-600 text-lg sm:text-3xl mt-1 sm:mt-0 flex-shrink-0",children:"🎉"})]})}),e.jsx("div",{className:`bg-gradient-to-br from-red-50 to-pink-100 border-2 rounded-lg sm:rounded-xl p-2 sm:p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${f==="declined"?"border-red-500 ring-2 sm:ring-4 ring-red-200":"border-red-300 hover:border-red-400"}`,onClick:()=>L("declined"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between h-full",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"p-2 sm:p-4 bg-gradient-to-br from-red-400 to-pink-500 rounded-lg sm:rounded-xl shadow-lg",children:e.jsx("span",{className:"text-white text-lg sm:text-2xl",children:"❌"})}),e.jsxs("div",{className:"ml-2 sm:ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-red-800 uppercase tracking-wide truncate",children:"Απορριφθέντα"}),e.jsx("p",{className:"text-lg sm:text-3xl font-bold text-red-900",children:M.filter(s=>s.status==="declined").length})]})]}),e.jsx("div",{className:"text-red-600 text-lg sm:text-3xl mt-1 sm:mt-0 flex-shrink-0",children:"😔"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"px-3 sm:px-6 py-4 sm:py-5 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center",children:"📋 Κατάσταση Προγραμμάτων"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:[U.length," προγράμματα"]}),u>1&&e.jsxs("span",{className:"bg-gray-100 text-gray-600 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:["Σελίδα ",y," από ",u]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:space-y-0 sm:flex-row sm:items-center sm:space-x-4",children:[f!=="all"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Φίλτρο:",e.jsxs("span",{className:"ml-1 font-semibold text-blue-600",children:[f==="pending"&&"⏳ Σε Αναμονή",f==="accepted"&&"✅ Αποδεκτά",f==="declined"&&"❌ Απορριφθέντα"]})]}),e.jsx("button",{onClick:()=>L("all"),className:"px-2 sm:px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition-colors",children:"✕"})]}),u>1&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-1 sm:space-x-2",children:[e.jsx("button",{onClick:()=>I(s=>Math.max(s-1,1)),disabled:y===1,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"←"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(3,u)},(s,t)=>{let r;return u<=3||y<=2?r=t+1:y>=u-1?r=u-2+t:r=y-1+t,e.jsx("button",{onClick:()=>I(r),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium rounded-lg transition-all duration-200 ${y===r?"bg-blue-600 text-white shadow-lg":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-900"}`,children:r},r)})}),e.jsx("button",{onClick:()=>I(s=>Math.min(s+1,u)),disabled:y===u,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"→"})]})]})]})}),e.jsx("div",{className:"p-3 sm:p-6",children:ne.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:A||f!=="all"?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm sm:text-base",children:A?`Δεν βρέθηκαν προγράμματα για την αναζήτηση "${A}"`:`Δεν βρέθηκαν προγράμματα με κατάσταση "${f}"`}),e.jsxs("div",{className:"mt-3 flex flex-wrap justify-center gap-2",children:[A&&e.jsx("button",{onClick:()=>W(""),className:"px-3 py-1 text-xs sm:text-sm bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors",children:"✕ Καθαρισμός αναζήτησης"}),f!=="all"&&e.jsx("button",{onClick:()=>L("all"),className:"px-3 py-1 text-xs sm:text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"✕ Καθαρισμός φίλτρου"})]})]}):e.jsx("p",{className:"text-sm sm:text-base",children:"Δεν υπάρχουν προγράμματα Personal Training"})}):e.jsx("div",{className:"space-y-3 sm:space-y-4",children:ne.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 hover:shadow-lg cursor-pointer transition-all duration-200 hover:border-blue-300",onClick:()=>{re({email:s.user.email})||(he(s.user),ve(s.user.id),setTimeout(()=>{const t=document.querySelector("#schedule-editor");t&&(t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),t.classList.add("animate-pulse"),setTimeout(()=>{t.classList.remove("animate-pulse")},2e3))},500))},children:e.jsxs("div",{className:"flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:s.user.profile_photo?e.jsx("img",{src:s.user.profile_photo,alt:`${s.user.firstName} ${s.user.lastName}`,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover border-2 border-white shadow-lg",onError:t=>{const r=t.target;r.style.display="none";const l=r.parentElement;l&&(l.innerHTML='<div class="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg"><svg class="h-5 w-5 sm:h-6 sm:w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>')}}):e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Ee,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:[s.user.firstName," ",s.user.lastName]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex items-center",children:[e.jsx("span",{className:"mr-1",children:"📧"}),s.user.email]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["📅 ",s.schedule.month,"/",s.schedule.year]}),e.jsxs("span",{className:`inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs font-bold ${$(s.schedule)==="Personal Training"?"bg-blue-100 text-blue-800 border border-blue-200":$(s.schedule)==="Kick Boxing"?"bg-red-100 text-red-800 border border-red-200":"bg-purple-100 text-purple-800 border border-purple-200"}`,children:[$(s.schedule)==="Personal Training"&&"💪",$(s.schedule)==="Kick Boxing"&&"🥊",$(s.schedule)==="Combo Training"&&"🔥",e.jsx("span",{className:"hidden sm:inline ml-1",children:$(s.schedule)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[e.jsxs("p",{children:["Δημιουργήθηκε: ",new Date(s.schedule.createdAt).toLocaleDateString("el-GR")]}),s.status==="accepted"&&s.schedule.acceptedAt&&e.jsxs("p",{className:"text-green-600",children:["Αποδεκτό: ",new Date(s.schedule.acceptedAt).toLocaleDateString("el-GR")]}),s.status==="declined"&&s.schedule.declinedAt&&e.jsxs("p",{className:"text-red-600",children:["Απορρίφθηκε: ",new Date(s.schedule.declinedAt).toLocaleDateString("el-GR")]})]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-3 sm:mt-0",children:e.jsxs("span",{className:`inline-flex items-center px-3 sm:px-4 py-2 rounded-full text-xs sm:text-sm font-bold shadow-lg ${s.status==="pending"?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white":s.status==="accepted"?"bg-gradient-to-r from-green-400 to-emerald-500 text-white":"bg-gradient-to-r from-red-400 to-pink-500 text-white"}`,children:[s.status==="pending"&&"⏳ Σε Αναμονή",s.status==="accepted"&&"✅ Αποδεκτό",s.status==="declined"&&"❌ Απορριφθέν"]})})]})},s.schedule.id))})}),u>1&&e.jsx("div",{className:"px-3 sm:px-6 py-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"text-center sm:text-left",children:e.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Εμφανίζονται ",ee+1,"-",Math.min(ae,U.length)," από ",U.length," προγράμματα"]})}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx("button",{onClick:()=>I(s=>Math.max(s-1,1)),disabled:y===1,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"← Προηγούμενη"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(3,u)},(s,t)=>{let r;return u<=3||y<=2?r=t+1:y>=u-1?r=u-2+t:r=y-1+t,e.jsx("button",{onClick:()=>I(r),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium rounded-lg transition-all duration-200 ${y===r?"bg-blue-600 text-white shadow-lg":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-900"}`,children:r},r)})}),e.jsx("button",{onClick:()=>I(s=>Math.min(s+1,u)),disabled:y===u,className:"px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Επόμενη →"})]})]})})]}),T&&d&&!re({email:T.email,personalTrainingCode:T.personalTrainingCode})&&e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border-2 border-blue-200 rounded-xl shadow-xl p-4 sm:p-8",id:"schedule-editor",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 sm:p-6 rounded-xl shadow-lg flex-1 sm:flex-none",children:[e.jsxs("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:["🏋️‍♂️ Πρόγραμμα για ",T.firstName," ",T.lastName]}),e.jsxs("p",{className:"text-blue-100 text-sm sm:text-lg",children:["📅 ",fe[d.month-1]," ",d.year]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 sm:space-x-2 sm:gap-0",children:C?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:ke,className:"flex items-center space-x-1 px-3 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-sm",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Προσθήκη Σεσίας"}),e.jsx("span",{className:"sm:hidden",children:"Προσθήκη"})]}),e.jsxs("button",{onClick:_e,className:"flex items-center space-x-1 px-3 py-2 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors text-sm",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Αποθήκευση"})]}),e.jsx("button",{onClick:()=>Y(!1),className:"flex items-center space-x-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:e.jsx("span",{children:"Ακύρωση"})})]}):e.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-sm",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx("span",{children:"Επεξεργασία"})]})})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:d.scheduleData.sessions.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ημέρα"}),C?e.jsx("input",{type:"date",value:s.date,onChange:t=>R(s.id,"date",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:new Date(s.date).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Έναρξης"}),C?e.jsx("select",{value:s.startTime,onChange:t=>R(s.id,"startTime",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:oe.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Ώρα Λήξης"}),C?e.jsx("select",{value:s.endTime,onChange:t=>R(s.id,"endTime",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:oe.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.endTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Τύπος"}),C?e.jsxs("select",{value:s.type,onChange:t=>R(s.id,"type",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:[e.jsx("option",{value:"personal",children:"Personal Training"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900 capitalize",children:s.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Προπονητής"}),C?e.jsx("select",{value:s.trainer,onChange:t=>R(s.id,"trainer",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",children:ue.map(t=>e.jsx("option",{value:t,children:t},t))}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.trainer})]}),e.jsx("div",{className:"flex items-end sm:col-span-2 lg:col-span-1",children:C&&e.jsxs("button",{onClick:()=>Ae(s.id),className:"flex items-center space-x-1 px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors text-sm w-full sm:w-auto",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Διαγραφή"})]})})]}),s.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Σημειώσεις"}),C?e.jsx("input",{type:"text",value:s.notes,onChange:t=>R(s.id,"notes",t.target.value),className:"w-full border border-gray-300 rounded px-2 py-2 text-sm",placeholder:"Σημειώσεις για τη σέσια"}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:s.notes})]})]},s.id))}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Γενικές Σημειώσεις"}),C?e.jsx("textarea",{value:d.scheduleData.notes||"",onChange:s=>{const t={...d,scheduleData:{...d.scheduleData,notes:s.target.value}};D(t)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:3,placeholder:"Γενικές σημειώσεις για το πρόγραμμα..."}):e.jsx("p",{className:"text-sm text-gray-900",children:d.scheduleData.notes||"Δεν υπάρχουν σημειώσεις"})]})]})]}),_!=="personal-training"&&!J&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Αυτή η κατηγορία θα υλοποιηθεί σύντομα."})})]})]}),pe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-xl sm:rounded-t-2xl p-4 sm:p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"🔑 Δημιουργία Κωδικού"}),e.jsx("p",{className:"text-purple-100 text-sm sm:text-base",children:"Δημιουργήστε νέο κωδικό και πρόγραμμα"})]}),e.jsx("button",{onClick:()=>G(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-all duration-200 flex-shrink-0 ml-2",children:e.jsx(me,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})}),e.jsxs("div",{className:"p-4 sm:p-8",children:[e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 sm:p-6 border border-indigo-200",children:[e.jsx("label",{className:"block text-base sm:text-lg font-bold text-indigo-800 mb-3 sm:mb-4 flex items-center",children:"🏋️‍♂️ Τύπος Προπόνησης"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>V("individual"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${N==="individual"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👤 Ατομικό"}),e.jsx("button",{type:"button",onClick:()=>V("group"),className:`px-4 sm:px-6 py-2 sm:py-3 text-sm font-semibold rounded-lg transition-all duration-200 ${N==="group"?"bg-indigo-600 text-white shadow-lg":"bg-white text-indigo-600 border-2 border-indigo-200 hover:border-indigo-400"}`,children:"👥 Group"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("label",{className:"block text-lg font-bold text-blue-800 mb-4 flex items-center",children:["👤 ",N==="individual"?"Επιλογή Χρήστη":"Επιλογή Χρηστών (Group)"]}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>H("dropdown"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${X==="dropdown"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"📋 Dropdown"}),e.jsx("button",{type:"button",onClick:()=>H("search"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 ${X==="search"?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-600 border-2 border-blue-200 hover:border-blue-400"}`,children:"🔍 Αναζήτηση"})]}),X==="dropdown"?N==="individual"?e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700",value:m.selectedUserId,onChange:s=>K({...m,selectedUserId:s.target.value}),children:[e.jsx("option",{value:"",children:"-- Επιλέξτε χρήστη --"}),w.length>0?w.map(s=>e.jsxs("option",{value:s.id,children:[s.firstName," ",s.lastName," (",s.email,")"]},s.id)):e.jsx("option",{value:"",disabled:!0,children:"Δεν υπάρχουν χρήστες"})]}):e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white",children:w.length>0?w.map(s=>e.jsx("div",{className:`p-3 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${v.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{v.includes(s.id)?B(t=>t.filter(r=>r!==s.id)):B(t=>[...t,s.id])},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]})]})},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν υπάρχουν χρήστες"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"🔍 Αναζήτηση με όνομα ή email...",value:F,onChange:s=>te(s.target.value)}),F&&e.jsx("div",{className:"max-h-48 overflow-y-auto border-2 border-blue-200 rounded-xl bg-white shadow-lg",children:le.length>0?le.map(s=>e.jsxs("div",{className:`p-4 hover:bg-blue-50 cursor-pointer border-b border-blue-100 last:border-b-0 transition-all duration-200 ${N==="individual"?m.selectedUserId===s.id?"bg-blue-100 border-l-4 border-l-blue-500":"":v.includes(s.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,onClick:()=>{N==="individual"?K({...m,selectedUserId:s.id}):v.includes(s.id)?B(t=>t.filter(r=>r!==s.id)):B(t=>[...t,s.id])},children:[N==="group"&&e.jsx("input",{type:"checkbox",checked:v.includes(s.id),onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]},s.id)):e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Δεν βρέθηκαν χρήστες"})})]}),(N==="individual"?m.selectedUserId:v.length>0)&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"✓"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-green-800",children:["✅ ",N==="individual"?"Επιλεγμένος:":"Επιλεγμένοι:"]}),N==="individual"?e.jsxs("div",{className:"text-xs text-green-600",children:[(ie=w.find(s=>s.id===m.selectedUserId))==null?void 0:ie.firstName," ",(de=w.find(s=>s.id===m.selectedUserId))==null?void 0:de.lastName," (",(ce=w.find(s=>s.id===m.selectedUserId))==null?void 0:ce.email,")"]}):e.jsxs("div",{className:"text-xs text-green-600",children:[v.map(s=>{const t=w.find(r=>r.id===s);return t?`${t.firstName} ${t.lastName}`:"Άγνωστος"}).join(", ")," (",v.length," χρήστες)"]})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-bold text-purple-800 mb-3 flex items-center",children:"🔑 Κωδικός"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-purple-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"π.χ. PERSONAL2024",value:m.code,onChange:s=>K({...m,code:s.target.value})})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 sm:p-6 border border-orange-200",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-bold text-orange-800 mb-4 sm:mb-6 flex items-center",children:"🏋️‍♂️ Προσωποποιημένο Πρόγραμμα"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:O.map((s,t)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:t+1})}),e.jsxs("h5",{className:"font-semibold text-gray-800",children:["Σέσια ",t+1]})]}),O.length>1&&e.jsx("button",{onClick:()=>k(r=>r.filter((l,n)=>n!==t)),className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(xe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"📅 Ημερομηνία"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:s.date,onChange:r=>{k(l=>l.map((n,i)=>i===t?{...n,date:r.target.value}:n))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"🕐 Έναρξη"}),e.jsx("input",{type:"time",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:s.startTime,onChange:r=>k(l=>l.map((n,i)=>i===t?{...n,startTime:r.target.value}:n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"🕕 Λήξη"}),e.jsx("input",{type:"time",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:s.endTime,onChange:r=>k(l=>l.map((n,i)=>i===t?{...n,endTime:r.target.value}:n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"💪 Τύπος"}),e.jsxs("select",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:s.type,onChange:r=>k(l=>l.map((n,i)=>i===t?{...n,type:r.target.value}:n)),children:[e.jsx("option",{value:"personal",children:"Personal Training"}),e.jsx("option",{value:"kickboxing",children:"Kick Boxing"}),e.jsx("option",{value:"combo",children:"Combo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"🏠 Αίθουσα"}),e.jsxs("select",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:s.room,onChange:r=>k(l=>l.map((n,i)=>i===t?{...n,room:r.target.value}:n)),children:[e.jsx("option",{value:"Αίθουσα Mike",children:"Αίθουσα Mike"}),e.jsx("option",{value:"Αίθουσα Jordan",children:"Αίθουσα Jordan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"👨‍🏫 Προπονητής"}),e.jsx("select",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:s.trainer,onChange:r=>k(l=>l.map((n,i)=>i===t?{...n,trainer:r.target.value}:n)),children:ue.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"📝 Σημειώσεις"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:s.notes||"",placeholder:"Προαιρετικές σημειώσεις...",onChange:r=>k(l=>l.map((n,i)=>i===t?{...n,notes:r.target.value}:n))})]})]})]},s.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mt-4 space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{type:"button",className:"px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>k(s=>[...s,{id:`tmp-${s.length+1}`,date:new Date().toISOString().split("T")[0],startTime:"19:00",endTime:"20:00",type:"personal",trainer:"Mike",room:"Αίθουσα Mike",notes:""}]),children:"➕ Προσθήκη Σέσιας"}),O.length>1&&e.jsx("button",{type:"button",className:"px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium flex items-center justify-center",onClick:()=>k(s=>s.slice(0,-1)),children:"➖ Διαγραφή Τελευταίας"})]}),e.jsx("div",{className:"text-center sm:text-right",children:e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg",children:["📊 Σύνολο: ",O.length," σεσίας"]})})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>G(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-semibold shadow-lg",children:"❌ Ακύρωση"}),e.jsx("button",{onClick:Ce,disabled:!m.code.trim()||(N==="individual"?!m.selectedUserId:v.length===0),className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-green-500 disabled:hover:to-emerald-500",children:"✅ Δημιουργία Κωδικού"})]})]})]})})]})};export{ze as default};
