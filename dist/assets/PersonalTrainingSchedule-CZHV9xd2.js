import{s as L,u as k,r as c,z as i,t as p,j as e,c as b,U as E,T as R,Z as U}from"./index-B5-U9oIS.js";import{C as O}from"./circle-alert-BZVbxTiu.js";import{C as S}from"./circle-check-big-BKWgscB5.js";import{C as f}from"./circle-x-CH1_vWux.js";import{D as T}from"./dumbbell-BUlIF-cH.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=L("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Q=()=>{console.log("[PersonalTrainingSchedule] Component rendering");const{user:a}=k();console.log("[PersonalTrainingSchedule] User from useAuth:",a==null?void 0:a.email,"ID:",a==null?void 0:a.id);const[r,o]=c.useState(null),[d,l]=c.useState(!0),[w,j]=c.useState(!1),[y,h]=c.useState(!1),u=c.useRef(!1),[m,x]=c.useState(null),P=["ÎšÏ…ÏÎ¹Î±ÎºÎ®","Î”ÎµÏ…Ï„Î­ÏÎ±","Î¤ÏÎ¯Ï„Î·","Î¤ÎµÏ„Î¬ÏÏ„Î·","Î Î­Î¼Ï€Ï„Î·","Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®","Î£Î¬Î²Î²Î±Ï„Î¿"];c.useEffect(()=>{if(console.log("[PersonalTrainingSchedule] ===== USEEFFECT TRIGGERED ====="),console.log("[PersonalTrainingSchedule] User:",a==null?void 0:a.email,"ID:",a==null?void 0:a.id),console.log("[PersonalTrainingSchedule] User object:",a),console.log("[PersonalTrainingSchedule] hasLoadedRef.current:",u.current),console.log("[PersonalTrainingSchedule] isLoading:",y),console.log("[PersonalTrainingSchedule] loading state:",d),m&&(console.log("[PersonalTrainingSchedule] Clearing existing timeout"),clearTimeout(m),x(null)),!a){console.log("[PersonalTrainingSchedule] No user, resetting hasLoadedRef and stopping loading"),u.current=!1,l(!1);return}if(u.current){console.log("[PersonalTrainingSchedule] Already loaded for this user, skipping");return}console.log("[PersonalTrainingSchedule] Starting load for user:",a.email),u.current=!0,g(),console.log("[PersonalTrainingSchedule] Setting 10 second timeout");const s=setTimeout(()=>{console.warn("[PersonalTrainingSchedule] Load timeout reached, stopping loading"),l(!1),h(!1)},1e4);return x(s),()=>{console.log("[PersonalTrainingSchedule] useEffect cleanup"),s&&clearTimeout(s)}},[a]);const g=async()=>{if(console.log("[PersonalTrainingSchedule] ===== LOADING STARTED ====="),console.log("[PersonalTrainingSchedule] User ID:",a==null?void 0:a.id),console.log("[PersonalTrainingSchedule] User email:",a==null?void 0:a.email),y){console.log("[PersonalTrainingSchedule] Already loading, skipping...");return}h(!0);try{if(l(!0),!(a!=null&&a.id)){console.error("[PersonalTrainingSchedule] No user ID found"),i.error("Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚. ÎšÎ¬Î½Ï„Îµ ÎµÏ€Î±Î½Î±ÏƒÏÎ½Î´ÎµÏƒÎ·."),o(null);return}console.log("[PersonalTrainingSchedule] Querying personal_training_schedules...");const{data:s,error:n}=await p.from("personal_training_schedules").select("id,user_id,month,year,schedule_data,status,created_by,created_at,updated_at,trainer_name,accepted_at,declined_at").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(1);if(console.log("[PersonalTrainingSchedule] Query result - data:",s,"error:",n),n){console.error("[PersonalTrainingSchedule] Query error:",n),i.error(`Î£Ï†Î¬Î»Î¼Î± Î²Î¬ÏƒÎ·Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½: ${n.message}`),o(null);return}if(s&&s.length>0){console.log("[PersonalTrainingSchedule] Found schedule data:",s[0]);const t=s[0],N={id:t.id,userId:t.user_id,month:t.month,year:t.year,scheduleData:t.schedule_data,status:t.status,createdBy:t.created_by,createdAt:t.created_at,updatedAt:t.updated_at,acceptedAt:t.accepted_at,declinedAt:t.declined_at};console.log("[PersonalTrainingSchedule] Loaded schedule:",N),o(N)}else console.log("[PersonalTrainingSchedule] No schedule found for user"),o(null)}catch(s){console.error("[PersonalTrainingSchedule] Exception while loading schedule:",s),i.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Î¿Ï… Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚"),o(null)}finally{console.log("[PersonalTrainingSchedule] ===== LOADING COMPLETED ====="),l(!1),h(!1),m&&(clearTimeout(m),x(null))}},v=async()=>{if(r)try{l(!0),console.log("[PTS] Accepting schedule:",r.id);const s=new Date().toISOString(),n=new Date().toISOString(),{error:t}=await p.from("personal_training_schedules").update({status:"accepted",accepted_at:s,updated_at:n}).eq("id",r.id);if(t)throw console.error("[PTS] Accept error:",t),t;console.log("[PTS] Schedule accepted successfully"),await g(),i.success("Î¤Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î­Î³Î¹Î½Îµ Î±Ï€Î¿Î´ÎµÎºÏ„ÏŒ!")}catch(s){console.error("[PTS] Accept error:",s),i.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î´Î¿Ï‡Î® Ï„Î¿Ï… Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚")}finally{l(!1)}},D=async()=>{if(r)try{l(!0),console.log("[PTS] Declining schedule:",r.id);const s=new Date().toISOString(),n=new Date().toISOString(),{error:t}=await p.from("personal_training_schedules").update({status:"declined",declined_at:s,updated_at:n}).eq("id",r.id);if(t)throw console.error("[PTS] Decline error:",t),t;console.log("[PTS] Schedule declined successfully"),await g(),j(!0),i.success("Î¤Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î±Ï€Î¿ÏÏÎ¯Ï†Î¸Î·ÎºÎµ. Î˜Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎ¿Ï…Î¼Îµ Î¼Î±Î¶Î¯ ÏƒÎ±Ï‚ Î³Î¹Î± Î½Î± Î²ÏÎ¿ÏÎ¼Îµ Ï„Î¹Ï‚ ÎºÎ±Ï„Î¬Î»Î»Î·Î»ÎµÏ‚ ÏÏÎµÏ‚.")}catch(s){console.error("[PTS] Decline error:",s),i.error("Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€ÏŒÏÏÎ¹ÏˆÎ· Ï„Î¿Ï… Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚")}finally{l(!1)}},_=s=>{switch(s){case"personal":return e.jsx(T,{className:"h-5 w-5 text-blue-600"});case"kickboxing":return e.jsx(U,{className:"h-5 w-5 text-red-600"});case"combo":return e.jsx(R,{className:"h-5 w-5 text-green-600"});default:return e.jsx(T,{className:"h-5 w-5 text-gray-600"})}},A=s=>{switch(s){case"personal":return"Personal Training";case"kickboxing":return"Kick Boxing";case"combo":return"Combo Training";default:return s}},I=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=s=>{switch(s){case"pending":return"Î•ÎºÎºÏÎµÎ¼ÎµÎ¯ Î‘Ï€ÏŒÏ†Î±ÏƒÎ·";case"accepted":return"Î‘Ï€Î¿Î´ÎµÎºÏ„ÏŒ";case"declined":return"Î‘Ï€Î¿ÏÏÎ¯Ï†Î¸Î·ÎºÎµ";default:return s}};return console.log("[PersonalTrainingSchedule] Rendering - loading:",d,"user:",a==null?void 0:a.email,"schedule:",!!r),d?(console.log("[PersonalTrainingSchedule] Rendering loading screen"),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚..."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["User: ",(a==null?void 0:a.email)||"No user"]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Loading state: ",d?"true":"false"]})]})})):r?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Personal Training"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[P[r.month-1]," ",r.year]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${I(r.status)}`,children:C(r.status)})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½ÎµÏ‚ Î£ÎµÏƒÎ¯ÎµÏ‚"}),r.scheduleData.sessions.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(b,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½ÎµÏ‚ ÏƒÎµÏƒÎ¯ÎµÏ‚"})]}):e.jsx("div",{className:"space-y-4",children:r.scheduleData.sessions.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:_(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:A(s.type)}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.startTime," - ",s.endTime]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(s.date).toLocaleDateString("el-GR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:s.trainer})]}),s.room&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"ğŸ“"}),e.jsx("span",{children:s.room})]}),s.notes&&e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600 mt-2",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5"}),e.jsx("span",{children:s.notes})]})]})]})]})},s.id))})]}),(r.scheduleData.notes||r.scheduleData.specialInstructions)&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚"}),e.jsxs("div",{className:"space-y-4",children:[r.scheduleData.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚"}),e.jsx("p",{className:"text-gray-600",children:r.scheduleData.notes})]}),r.scheduleData.specialInstructions&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Î•Î¹Î´Î¹ÎºÎ­Ï‚ ÎŸÎ´Î·Î³Î¯ÎµÏ‚"}),e.jsx("p",{className:"text-gray-600",children:r.scheduleData.specialInstructions})]})]})]}),r.status==="pending"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Î‘Ï€Î¿Î´Î¿Ï‡Î® Î ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ»Î­Î³Î¾Ï„Îµ Ï„Î¿ Ï€Î±ÏÎ±Ï€Î¬Î½Ï‰ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± ÎºÎ±Î¹ ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Î±Î½ Ï„Î¿ Î±Ï€Î¿Î´Î­Ï‡ÎµÏƒÏ„Îµ Î® ÏŒÏ‡Î¹."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("button",{onClick:v,disabled:d,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(S,{className:"h-5 w-5"}),e.jsx("span",{children:"Î‘Ï€Î¿Î´Î¿Ï‡Î®"})]}),e.jsxs("button",{onClick:D,disabled:d,className:"flex items-center space-x-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(f,{className:"h-5 w-5"}),e.jsx("span",{children:"Î‘Ï€ÏŒÏÏÎ¹ÏˆÎ·"})]})]})]})}),r.status==="accepted"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(S,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-900",children:"Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î‘Ï€Î¿Î´ÎµÎºÏ„ÏŒ"}),e.jsx("p",{className:"text-green-700 mt-1",children:"Î¤Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î­Ï‡ÎµÎ¹ Î³Î¯Î½ÎµÎ¹ Î±Ï€Î¿Î´ÎµÎºÏ„ÏŒ! Î˜Î± Î»Î¬Î²ÎµÏ„Îµ ÎµÎ¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Ï„Î¹Ï‚ Ï€ÏÎ¿Ï€Î¿Î½Î®ÏƒÎµÎ¹Ï‚ ÏƒÎ±Ï‚."})]})]})}),r.status==="declined"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-900",children:"Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î‘Ï€Î¿ÏÏÎ¹Ï†Î¸Î­Î½"}),e.jsx("p",{className:"text-red-700 mt-1",children:"Î Î±ÏÎ±ÎºÎ±Î»Ï Ï€ÎµÏÎ¬ÏƒÏ„Îµ Î±Ï€ÏŒ Ï„Î¿ Î³Ï…Î¼Î½Î±ÏƒÏ„Î®ÏÎ¹Î¿ Î³Î¹Î± Î½Î± ÏƒÏ…Î¶Î·Ï„Î®ÏƒÎ¿Ï…Î¼Îµ Ï„Î¹Ï‚ ÏÏÎµÏ‚ Ï€Î¿Ï… ÏƒÎ±Ï‚ Î²Î¿Î»ÎµÏÎ¿Ï…Î½."})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î‘Ï€Î¿ÏÏÎ¯Ï†Î¸Î·ÎºÎµ"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Î Î±ÏÎ±ÎºÎ±Î»Ï Ï€ÎµÏÎ¬ÏƒÏ„Îµ Î±Ï€ÏŒ Ï„Î¿ Î³Ï…Î¼Î½Î±ÏƒÏ„Î®ÏÎ¹Î¿ Î³Î¹Î± Î½Î± ÏƒÏ…Î¶Î·Ï„Î®ÏƒÎ¿Ï…Î¼Îµ Ï„Î¹Ï‚ ÏÏÎµÏ‚ Ï€Î¿Ï… ÏƒÎ±Ï‚ Î²Î¿Î»ÎµÏÎ¿Ï…Î½."}),e.jsx("button",{onClick:()=>j(!1),className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"ÎšÎ±Ï„Î¬Î»Î±Î²Î±"})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î±"}),e.jsx("p",{className:"text-gray-600",children:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Personal Training Î³Î¹Î± ÎµÏƒÎ¬Ï‚."})]})})};export{Q as default};
